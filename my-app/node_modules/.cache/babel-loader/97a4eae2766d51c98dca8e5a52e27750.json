{"ast":null,"code":"import _classCallCheck from '@babel/runtime/helpers/esm/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/esm/createClass';\nimport _defineProperty from '@babel/runtime/helpers/esm/defineProperty';\nimport _typeof from '@babel/runtime/helpers/esm/typeof';\nvar arr = [];\nvar each = arr.forEach;\nvar slice = arr.slice;\n\nfunction defaults(obj) {\n  each.call(slice.call(arguments, 1), function (source) {\n    if (source) {\n      for (var prop in source) {\n        if (obj[prop] === undefined) obj[prop] = source[prop];\n      }\n    }\n  });\n  return obj;\n}\n\nfunction addQueryString(url, params) {\n  if (params && _typeof(params) === 'object') {\n    var queryString = '',\n        e = encodeURIComponent; // Must encode data\n\n    for (var paramName in params) {\n      queryString += '&' + e(paramName) + '=' + e(params[paramName]);\n    }\n\n    if (!queryString) {\n      return url;\n    }\n\n    url = url + (url.indexOf('?') !== -1 ? '&' : '?') + queryString.slice(1);\n  }\n\n  return url;\n} // https://gist.github.com/Xeoncross/7663273\n\n\nfunction ajax(url, options, callback, data, cache) {\n  if (data && _typeof(data) === 'object') {\n    if (!cache) {\n      data['_t'] = new Date();\n    } // URL encoded form data must be in querystring format\n\n\n    data = addQueryString('', data).slice(1);\n  }\n\n  if (options.queryStringParams) {\n    url = addQueryString(url, options.queryStringParams);\n  }\n\n  try {\n    var x;\n\n    if (XMLHttpRequest) {\n      x = new XMLHttpRequest();\n    } else {\n      x = new ActiveXObject('MSXML2.XMLHTTP.3.0');\n    }\n\n    x.open(data ? 'POST' : 'GET', url, 1);\n\n    if (!options.crossDomain) {\n      x.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n    }\n\n    x.withCredentials = !!options.withCredentials;\n\n    if (data) {\n      x.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');\n    }\n\n    if (x.overrideMimeType) {\n      x.overrideMimeType(\"application/json\");\n    }\n\n    var h = options.customHeaders;\n    h = typeof h === 'function' ? h() : h;\n\n    if (h) {\n      for (var i in h) {\n        x.setRequestHeader(i, h[i]);\n      }\n    }\n\n    x.onreadystatechange = function () {\n      x.readyState > 3 && callback && callback(x.responseText, x);\n    };\n\n    x.send(data);\n  } catch (e) {\n    console && console.log(e);\n  }\n}\n\nfunction getDefaults() {\n  return {\n    loadPath: '/locales/{{lng}}/{{ns}}.json',\n    addPath: '/locales/add/{{lng}}/{{ns}}',\n    allowMultiLoading: false,\n    parse: JSON.parse,\n    parsePayload: function parsePayload(namespace, key, fallbackValue) {\n      return _defineProperty({}, key, fallbackValue || '');\n    },\n    crossDomain: false,\n    ajax: ajax\n  };\n}\n\nvar Backend = /*#__PURE__*/function () {\n  function Backend(services) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Backend);\n\n    this.init(services, options);\n    this.type = 'backend';\n  }\n\n  _createClass(Backend, [{\n    key: \"init\",\n    value: function init(services) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      this.services = services;\n      this.options = defaults(options, this.options || {}, getDefaults());\n    }\n  }, {\n    key: \"readMulti\",\n    value: function readMulti(languages, namespaces, callback) {\n      var loadPath = this.options.loadPath;\n\n      if (typeof this.options.loadPath === 'function') {\n        loadPath = this.options.loadPath(languages, namespaces);\n      }\n\n      var url = this.services.interpolator.interpolate(loadPath, {\n        lng: languages.join('+'),\n        ns: namespaces.join('+')\n      });\n      this.loadUrl(url, callback);\n    }\n  }, {\n    key: \"read\",\n    value: function read(language, namespace, callback) {\n      var loadPath = this.options.loadPath;\n\n      if (typeof this.options.loadPath === 'function') {\n        loadPath = this.options.loadPath([language], [namespace]);\n      }\n\n      var url = this.services.interpolator.interpolate(loadPath, {\n        lng: language,\n        ns: namespace\n      });\n      this.loadUrl(url, callback);\n    }\n  }, {\n    key: \"loadUrl\",\n    value: function loadUrl(url, callback) {\n      var _this = this;\n\n      this.options.ajax(url, this.options, function (data, xhr) {\n        if (xhr.status >= 500 && xhr.status < 600) return callback('failed loading ' + url, true\n        /* retry */\n        );\n        if (xhr.status >= 400 && xhr.status < 500) return callback('failed loading ' + url, false\n        /* no retry */\n        );\n        var ret, err;\n\n        try {\n          ret = _this.options.parse(data, url);\n        } catch (e) {\n          err = 'failed parsing ' + url + ' to json';\n        }\n\n        if (err) return callback(err, false);\n        callback(null, ret);\n      });\n    }\n  }, {\n    key: \"create\",\n    value: function create(languages, namespace, key, fallbackValue) {\n      var _this2 = this;\n\n      if (typeof languages === 'string') languages = [languages];\n      var payload = this.options.parsePayload(namespace, key, fallbackValue);\n      languages.forEach(function (lng) {\n        var url = _this2.services.interpolator.interpolate(_this2.options.addPath, {\n          lng: lng,\n          ns: namespace\n        });\n\n        _this2.options.ajax(url, _this2.options, function (data, xhr) {//const statusCode = xhr.status.toString();\n          // TODO: if statusCode === 4xx do log\n        }, payload);\n      });\n    }\n  }]);\n\n  return Backend;\n}();\n\nBackend.type = 'backend';\nexport default Backend;","map":{"version":3,"sources":["/Users/iflego/Documents/GitHub/landy-react-template/my-app/node_modules/i18next-xhr-backend/dist/esm/i18nextXHRBackend.js"],"names":["_classCallCheck","_createClass","_defineProperty","_typeof","arr","each","forEach","slice","defaults","obj","call","arguments","source","prop","undefined","addQueryString","url","params","queryString","e","encodeURIComponent","paramName","indexOf","ajax","options","callback","data","cache","Date","queryStringParams","x","XMLHttpRequest","ActiveXObject","open","crossDomain","setRequestHeader","withCredentials","overrideMimeType","h","customHeaders","i","onreadystatechange","readyState","responseText","send","console","log","getDefaults","loadPath","addPath","allowMultiLoading","parse","JSON","parsePayload","namespace","key","fallbackValue","Backend","services","length","init","type","value","readMulti","languages","namespaces","interpolator","interpolate","lng","join","ns","loadUrl","read","language","_this","xhr","status","ret","err","create","_this2","payload"],"mappings":"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","sourcesContent":["import _classCallCheck from '@babel/runtime/helpers/esm/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/esm/createClass';\nimport _defineProperty from '@babel/runtime/helpers/esm/defineProperty';\nimport _typeof from '@babel/runtime/helpers/esm/typeof';\n\nvar arr = [];\nvar each = arr.forEach;\nvar slice = arr.slice;\nfunction defaults(obj) {\n  each.call(slice.call(arguments, 1), function (source) {\n    if (source) {\n      for (var prop in source) {\n        if (obj[prop] === undefined) obj[prop] = source[prop];\n      }\n    }\n  });\n  return obj;\n}\n\nfunction addQueryString(url, params) {\n  if (params && _typeof(params) === 'object') {\n    var queryString = '',\n        e = encodeURIComponent; // Must encode data\n\n    for (var paramName in params) {\n      queryString += '&' + e(paramName) + '=' + e(params[paramName]);\n    }\n\n    if (!queryString) {\n      return url;\n    }\n\n    url = url + (url.indexOf('?') !== -1 ? '&' : '?') + queryString.slice(1);\n  }\n\n  return url;\n} // https://gist.github.com/Xeoncross/7663273\n\n\nfunction ajax(url, options, callback, data, cache) {\n  if (data && _typeof(data) === 'object') {\n    if (!cache) {\n      data['_t'] = new Date();\n    } // URL encoded form data must be in querystring format\n\n\n    data = addQueryString('', data).slice(1);\n  }\n\n  if (options.queryStringParams) {\n    url = addQueryString(url, options.queryStringParams);\n  }\n\n  try {\n    var x;\n\n    if (XMLHttpRequest) {\n      x = new XMLHttpRequest();\n    } else {\n      x = new ActiveXObject('MSXML2.XMLHTTP.3.0');\n    }\n\n    x.open(data ? 'POST' : 'GET', url, 1);\n\n    if (!options.crossDomain) {\n      x.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n    }\n\n    x.withCredentials = !!options.withCredentials;\n\n    if (data) {\n      x.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');\n    }\n\n    if (x.overrideMimeType) {\n      x.overrideMimeType(\"application/json\");\n    }\n\n    var h = options.customHeaders;\n    h = typeof h === 'function' ? h() : h;\n\n    if (h) {\n      for (var i in h) {\n        x.setRequestHeader(i, h[i]);\n      }\n    }\n\n    x.onreadystatechange = function () {\n      x.readyState > 3 && callback && callback(x.responseText, x);\n    };\n\n    x.send(data);\n  } catch (e) {\n    console && console.log(e);\n  }\n}\n\nfunction getDefaults() {\n  return {\n    loadPath: '/locales/{{lng}}/{{ns}}.json',\n    addPath: '/locales/add/{{lng}}/{{ns}}',\n    allowMultiLoading: false,\n    parse: JSON.parse,\n    parsePayload: function parsePayload(namespace, key, fallbackValue) {\n      return _defineProperty({}, key, fallbackValue || '');\n    },\n    crossDomain: false,\n    ajax: ajax\n  };\n}\n\nvar Backend =\n/*#__PURE__*/\nfunction () {\n  function Backend(services) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Backend);\n\n    this.init(services, options);\n    this.type = 'backend';\n  }\n\n  _createClass(Backend, [{\n    key: \"init\",\n    value: function init(services) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      this.services = services;\n      this.options = defaults(options, this.options || {}, getDefaults());\n    }\n  }, {\n    key: \"readMulti\",\n    value: function readMulti(languages, namespaces, callback) {\n      var loadPath = this.options.loadPath;\n\n      if (typeof this.options.loadPath === 'function') {\n        loadPath = this.options.loadPath(languages, namespaces);\n      }\n\n      var url = this.services.interpolator.interpolate(loadPath, {\n        lng: languages.join('+'),\n        ns: namespaces.join('+')\n      });\n      this.loadUrl(url, callback);\n    }\n  }, {\n    key: \"read\",\n    value: function read(language, namespace, callback) {\n      var loadPath = this.options.loadPath;\n\n      if (typeof this.options.loadPath === 'function') {\n        loadPath = this.options.loadPath([language], [namespace]);\n      }\n\n      var url = this.services.interpolator.interpolate(loadPath, {\n        lng: language,\n        ns: namespace\n      });\n      this.loadUrl(url, callback);\n    }\n  }, {\n    key: \"loadUrl\",\n    value: function loadUrl(url, callback) {\n      var _this = this;\n\n      this.options.ajax(url, this.options, function (data, xhr) {\n        if (xhr.status >= 500 && xhr.status < 600) return callback('failed loading ' + url, true\n        /* retry */\n        );\n        if (xhr.status >= 400 && xhr.status < 500) return callback('failed loading ' + url, false\n        /* no retry */\n        );\n        var ret, err;\n\n        try {\n          ret = _this.options.parse(data, url);\n        } catch (e) {\n          err = 'failed parsing ' + url + ' to json';\n        }\n\n        if (err) return callback(err, false);\n        callback(null, ret);\n      });\n    }\n  }, {\n    key: \"create\",\n    value: function create(languages, namespace, key, fallbackValue) {\n      var _this2 = this;\n\n      if (typeof languages === 'string') languages = [languages];\n      var payload = this.options.parsePayload(namespace, key, fallbackValue);\n      languages.forEach(function (lng) {\n        var url = _this2.services.interpolator.interpolate(_this2.options.addPath, {\n          lng: lng,\n          ns: namespace\n        });\n\n        _this2.options.ajax(url, _this2.options, function (data, xhr) {//const statusCode = xhr.status.toString();\n          // TODO: if statusCode === 4xx do log\n        }, payload);\n      });\n    }\n  }]);\n\n  return Backend;\n}();\n\nBackend.type = 'backend';\n\nexport default Backend;\n"]},"metadata":{},"sourceType":"module"}