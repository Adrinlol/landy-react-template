{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { useState, useEffect, useRef } from 'react';\nimport raf from \"rc-util/es/raf\";\nvar StatusQueue = ['measure', 'align', null, 'motion'];\nexport default (function (visible, doMeasure) {\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      status = _useState2[0],\n      setInternalStatus = _useState2[1];\n\n  var rafRef = useRef();\n  var destroyRef = useRef(false);\n\n  function setStatus(nextStatus) {\n    if (!destroyRef.current) {\n      setInternalStatus(nextStatus);\n    }\n  }\n\n  function cancelRaf() {\n    raf.cancel(rafRef.current);\n  }\n\n  function goNextStatus(callback) {\n    cancelRaf();\n    rafRef.current = raf(function () {\n      // Only align should be manually trigger\n      setStatus(function (prev) {\n        switch (status) {\n          case 'align':\n            return 'motion';\n\n          case 'motion':\n            return 'stable';\n\n          default:\n        }\n\n        return prev;\n      });\n      callback === null || callback === void 0 ? void 0 : callback();\n    });\n  } // Init status\n\n\n  useEffect(function () {\n    setStatus('measure');\n  }, [visible]); // Go next status\n\n  useEffect(function () {\n    switch (status) {\n      case 'measure':\n        doMeasure();\n        break;\n\n      default:\n    }\n\n    if (status) {\n      rafRef.current = raf( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var index, nextStatus;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                index = StatusQueue.indexOf(status);\n                nextStatus = StatusQueue[index + 1];\n\n                if (nextStatus && index !== -1) {\n                  setStatus(nextStatus);\n                }\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      })));\n    }\n  }, [status]);\n  useEffect(function () {\n    return function () {\n      destroyRef.current = true;\n      cancelRaf();\n    };\n  }, []);\n  return [status, goNextStatus];\n});","map":{"version":3,"sources":["/Users/iflego/Documents/GitHub/landy-react-template/my-app/node_modules/rc-trigger/es/Popup/useVisibleStatus.js"],"names":["_regeneratorRuntime","_asyncToGenerator","_slicedToArray","useState","useEffect","useRef","raf","StatusQueue","visible","doMeasure","_useState","_useState2","status","setInternalStatus","rafRef","destroyRef","setStatus","nextStatus","current","cancelRaf","cancel","goNextStatus","callback","prev","mark","_callee","index","wrap","_callee$","_context","next","indexOf","stop"],"mappings":"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","sourcesContent":["import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { useState, useEffect, useRef } from 'react';\nimport raf from \"rc-util/es/raf\";\nvar StatusQueue = ['measure', 'align', null, 'motion'];\nexport default (function (visible, doMeasure) {\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      status = _useState2[0],\n      setInternalStatus = _useState2[1];\n\n  var rafRef = useRef();\n  var destroyRef = useRef(false);\n\n  function setStatus(nextStatus) {\n    if (!destroyRef.current) {\n      setInternalStatus(nextStatus);\n    }\n  }\n\n  function cancelRaf() {\n    raf.cancel(rafRef.current);\n  }\n\n  function goNextStatus(callback) {\n    cancelRaf();\n    rafRef.current = raf(function () {\n      // Only align should be manually trigger\n      setStatus(function (prev) {\n        switch (status) {\n          case 'align':\n            return 'motion';\n\n          case 'motion':\n            return 'stable';\n\n          default:\n        }\n\n        return prev;\n      });\n      callback === null || callback === void 0 ? void 0 : callback();\n    });\n  } // Init status\n\n\n  useEffect(function () {\n    setStatus('measure');\n  }, [visible]); // Go next status\n\n  useEffect(function () {\n    switch (status) {\n      case 'measure':\n        doMeasure();\n        break;\n\n      default:\n    }\n\n    if (status) {\n      rafRef.current = raf( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var index, nextStatus;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                index = StatusQueue.indexOf(status);\n                nextStatus = StatusQueue[index + 1];\n\n                if (nextStatus && index !== -1) {\n                  setStatus(nextStatus);\n                }\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      })));\n    }\n  }, [status]);\n  useEffect(function () {\n    return function () {\n      destroyRef.current = true;\n      cancelRaf();\n    };\n  }, []);\n  return [status, goNextStatus];\n});"]},"metadata":{},"sourceType":"module"}