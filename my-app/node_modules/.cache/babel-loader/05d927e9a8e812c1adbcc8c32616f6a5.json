{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nvar _excluded = [\"id\", \"mode\", \"prefixCls\", \"backfill\", \"fieldNames\", \"inputValue\", \"searchValue\", \"onSearch\", \"autoClearSearchValue\", \"onSelect\", \"onDeselect\", \"dropdownMatchSelectWidth\", \"filterOption\", \"filterSort\", \"optionFilterProp\", \"optionLabelProp\", \"options\", \"children\", \"defaultActiveFirstOption\", \"menuItemSelectedIcon\", \"virtual\", \"listHeight\", \"listItemHeight\", \"value\", \"defaultValue\", \"labelInValue\", \"onChange\"];\n/**\n * To match accessibility requirement, we always provide an input in the component.\n * Other element will not set `tabIndex` to avoid `onBlur` sequence problem.\n * For focused select, we set `aria-live=\"polite\"` to update the accessibility content.\n *\n * ref:\n * - keyboard: https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles/listbox_role#Keyboard_interactions\n *\n * New api:\n * - listHeight\n * - listItemHeight\n * - component\n *\n * Remove deprecated api:\n * - multiple\n * - tags\n * - combobox\n * - firstActiveValue\n * - dropdownMenuStyle\n * - openClassName (Not list in api)\n *\n * Update:\n * - `backfill` only support `combobox` mode\n * - `combobox` mode not support `labelInValue` since it's meaningless\n * - `getInputElement` only support `combobox` mode\n * - `onChange` return OptionData instead of ReactNode\n * - `filterOption` `onChange` `onSelect` accept OptionData instead of ReactNode\n * - `combobox` mode trigger `onChange` will get `undefined` if no `value` match in Option\n * - `combobox` mode not support `optionLabelProp`\n */\n\nimport * as React from 'react';\nimport warning from \"rc-util/es/warning\";\nimport useMergedState from \"rc-util/es/hooks/useMergedState\";\nimport BaseSelect, { isMultiple } from './BaseSelect';\nimport OptionList from './OptionList';\nimport Option from './Option';\nimport OptGroup from './OptGroup';\nimport useOptions from './hooks/useOptions';\nimport SelectContext from './SelectContext';\nimport useId from './hooks/useId';\nimport useRefFunc from './hooks/useRefFunc';\nimport { fillFieldNames, flattenOptions, injectPropsWithOption } from './utils/valueUtil';\nimport warningProps from './utils/warningPropsUtil';\nimport { toArray } from './utils/commonUtil';\nimport useFilterOptions from './hooks/useFilterOptions';\nimport useCache from './hooks/useCache';\nvar OMIT_DOM_PROPS = ['inputValue'];\n\nfunction isRawValue(value) {\n  return !value || _typeof(value) !== 'object';\n}\n\nvar Select = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var id = props.id,\n      mode = props.mode,\n      _props$prefixCls = props.prefixCls,\n      prefixCls = _props$prefixCls === void 0 ? 'rc-select' : _props$prefixCls,\n      backfill = props.backfill,\n      fieldNames = props.fieldNames,\n      inputValue = props.inputValue,\n      searchValue = props.searchValue,\n      onSearch = props.onSearch,\n      _props$autoClearSearc = props.autoClearSearchValue,\n      autoClearSearchValue = _props$autoClearSearc === void 0 ? true : _props$autoClearSearc,\n      onSelect = props.onSelect,\n      onDeselect = props.onDeselect,\n      _props$dropdownMatchS = props.dropdownMatchSelectWidth,\n      dropdownMatchSelectWidth = _props$dropdownMatchS === void 0 ? true : _props$dropdownMatchS,\n      filterOption = props.filterOption,\n      filterSort = props.filterSort,\n      optionFilterProp = props.optionFilterProp,\n      optionLabelProp = props.optionLabelProp,\n      options = props.options,\n      children = props.children,\n      defaultActiveFirstOption = props.defaultActiveFirstOption,\n      menuItemSelectedIcon = props.menuItemSelectedIcon,\n      virtual = props.virtual,\n      _props$listHeight = props.listHeight,\n      listHeight = _props$listHeight === void 0 ? 200 : _props$listHeight,\n      _props$listItemHeight = props.listItemHeight,\n      listItemHeight = _props$listItemHeight === void 0 ? 20 : _props$listItemHeight,\n      value = props.value,\n      defaultValue = props.defaultValue,\n      labelInValue = props.labelInValue,\n      onChange = props.onChange,\n      restProps = _objectWithoutProperties(props, _excluded);\n\n  var mergedId = useId(id);\n  var multiple = isMultiple(mode);\n  var childrenAsData = !!(!options && children);\n  var mergedFilterOption = React.useMemo(function () {\n    if (filterOption === undefined && mode === 'combobox') {\n      return false;\n    }\n\n    return filterOption;\n  }, [filterOption, mode]); // ========================= FieldNames =========================\n\n  var mergedFieldNames = React.useMemo(function () {\n    return fillFieldNames(fieldNames, childrenAsData);\n  },\n  /* eslint-disable react-hooks/exhaustive-deps */\n  [// We stringify fieldNames to avoid unnecessary re-renders.\n  JSON.stringify(fieldNames), childrenAsData]); // =========================== Search ===========================\n\n  var _useMergedState = useMergedState('', {\n    value: searchValue !== undefined ? searchValue : inputValue,\n    postState: function postState(search) {\n      return search || '';\n    }\n  }),\n      _useMergedState2 = _slicedToArray(_useMergedState, 2),\n      mergedSearchValue = _useMergedState2[0],\n      setSearchValue = _useMergedState2[1]; // =========================== Option ===========================\n\n\n  var parsedOptions = useOptions(options, children, mergedFieldNames);\n  var valueOptions = parsedOptions.valueOptions,\n      labelOptions = parsedOptions.labelOptions,\n      mergedOptions = parsedOptions.options; // ========================= Wrap Value =========================\n\n  var convert2LabelValues = React.useCallback(function (draftValues) {\n    // Convert to array\n    var valueList = toArray(draftValues); // Convert to labelInValue type\n\n    return valueList.map(function (val) {\n      var rawValue;\n      var rawLabel;\n      var rawKey;\n      var rawDisabled; // Fill label & value\n\n      if (isRawValue(val)) {\n        rawValue = val;\n      } else {\n        var _val$value;\n\n        rawKey = val.key;\n        rawLabel = val.label;\n        rawValue = (_val$value = val.value) !== null && _val$value !== void 0 ? _val$value : rawKey;\n      }\n\n      var option = valueOptions.get(rawValue);\n\n      if (option) {\n        var _option$key; // Fill missing props\n\n\n        if (rawLabel === undefined) rawLabel = option === null || option === void 0 ? void 0 : option[optionLabelProp || mergedFieldNames.label];\n        if (rawKey === undefined) rawKey = (_option$key = option === null || option === void 0 ? void 0 : option.key) !== null && _option$key !== void 0 ? _option$key : rawValue;\n        rawDisabled = option === null || option === void 0 ? void 0 : option.disabled; // Warning if label not same as provided\n\n        if (process.env.NODE_ENV !== 'production' && !isRawValue(val)) {\n          var optionLabel = option === null || option === void 0 ? void 0 : option[mergedFieldNames.label];\n\n          if (optionLabel !== undefined && optionLabel !== rawLabel) {\n            warning(false, '`label` of `value` is not same as `label` in Select options.');\n          }\n        }\n      }\n\n      return {\n        label: rawLabel,\n        value: rawValue,\n        key: rawKey,\n        disabled: rawDisabled\n      };\n    });\n  }, [mergedFieldNames, optionLabelProp, valueOptions]); // =========================== Values ===========================\n\n  var _useMergedState3 = useMergedState(defaultValue, {\n    value: value\n  }),\n      _useMergedState4 = _slicedToArray(_useMergedState3, 2),\n      internalValue = _useMergedState4[0],\n      setInternalValue = _useMergedState4[1]; // Merged value with LabelValueType\n\n\n  var rawLabeledValues = React.useMemo(function () {\n    var _values$;\n\n    var values = convert2LabelValues(internalValue); // combobox no need save value when it's empty\n\n    if (mode === 'combobox' && !((_values$ = values[0]) === null || _values$ === void 0 ? void 0 : _values$.value)) {\n      return [];\n    }\n\n    return values;\n  }, [internalValue, convert2LabelValues, mode]); // Fill label with cache to avoid option remove\n\n  var _useCache = useCache(rawLabeledValues, valueOptions),\n      _useCache2 = _slicedToArray(_useCache, 2),\n      mergedValues = _useCache2[0],\n      getMixedOption = _useCache2[1];\n\n  var displayValues = React.useMemo(function () {\n    // `null` need show as placeholder instead\n    // https://github.com/ant-design/ant-design/issues/25057\n    if (!mode && mergedValues.length === 1) {\n      var firstValue = mergedValues[0];\n\n      if (firstValue.value === null && (firstValue.label === null || firstValue.label === undefined)) {\n        return [];\n      }\n    }\n\n    return mergedValues.map(function (item) {\n      var _item$label;\n\n      return _objectSpread(_objectSpread({}, item), {}, {\n        label: (_item$label = item.label) !== null && _item$label !== void 0 ? _item$label : item.value\n      });\n    });\n  }, [mode, mergedValues]);\n  /** Convert `displayValues` to raw value type set */\n\n  var rawValues = React.useMemo(function () {\n    return new Set(mergedValues.map(function (val) {\n      return val.value;\n    }));\n  }, [mergedValues]);\n  React.useEffect(function () {\n    if (mode === 'combobox') {\n      var _mergedValues$;\n\n      var strValue = (_mergedValues$ = mergedValues[0]) === null || _mergedValues$ === void 0 ? void 0 : _mergedValues$.value;\n\n      if (strValue !== undefined && strValue !== null) {\n        setSearchValue(String(strValue));\n      }\n    }\n  }, [mergedValues]); // ======================= Display Option =======================\n  // Create a placeholder item if not exist in `options`\n\n  var createTagOption = useRefFunc(function (val, label) {\n    var _ref;\n\n    var mergedLabel = label !== null && label !== void 0 ? label : val;\n    return _ref = {}, _defineProperty(_ref, mergedFieldNames.value, val), _defineProperty(_ref, mergedFieldNames.label, mergedLabel), _ref;\n  }); // Fill tag as option if mode is `tags`\n\n  var filledTagOptions = React.useMemo(function () {\n    if (mode !== 'tags') {\n      return mergedOptions;\n    } // >>> Tag mode\n\n\n    var cloneOptions = _toConsumableArray(mergedOptions); // Check if value exist in options (include new patch item)\n\n\n    var existOptions = function existOptions(val) {\n      return valueOptions.has(val);\n    }; // Fill current value as option\n\n\n    _toConsumableArray(mergedValues).sort(function (a, b) {\n      return a.value < b.value ? -1 : 1;\n    }).forEach(function (item) {\n      var val = item.value;\n\n      if (!existOptions(val)) {\n        cloneOptions.push(createTagOption(val, item.label));\n      }\n    });\n\n    return cloneOptions;\n  }, [createTagOption, mergedOptions, valueOptions, mergedValues, mode]);\n  var filteredOptions = useFilterOptions(filledTagOptions, mergedFieldNames, mergedSearchValue, mergedFilterOption, optionFilterProp); // Fill options with search value if needed\n\n  var filledSearchOptions = React.useMemo(function () {\n    if (mode !== 'tags' || !mergedSearchValue || filteredOptions.some(function (item) {\n      return item[optionFilterProp || 'value'] === mergedSearchValue;\n    })) {\n      return filteredOptions;\n    } // Fill search value as option\n\n\n    return [createTagOption(mergedSearchValue)].concat(_toConsumableArray(filteredOptions));\n  }, [createTagOption, optionFilterProp, mode, filteredOptions, mergedSearchValue]);\n  var orderedFilteredOptions = React.useMemo(function () {\n    if (!filterSort) {\n      return filledSearchOptions;\n    }\n\n    return _toConsumableArray(filledSearchOptions).sort(function (a, b) {\n      return filterSort(a, b);\n    });\n  }, [filledSearchOptions, filterSort]);\n  var displayOptions = React.useMemo(function () {\n    return flattenOptions(orderedFilteredOptions, {\n      fieldNames: mergedFieldNames,\n      childrenAsData: childrenAsData\n    });\n  }, [orderedFilteredOptions, mergedFieldNames, childrenAsData]); // =========================== Change ===========================\n\n  var triggerChange = function triggerChange(values) {\n    var labeledValues = convert2LabelValues(values);\n    setInternalValue(labeledValues);\n\n    if (onChange && ( // Trigger event only when value changed\n    labeledValues.length !== mergedValues.length || labeledValues.some(function (newVal, index) {\n      var _mergedValues$index;\n\n      return ((_mergedValues$index = mergedValues[index]) === null || _mergedValues$index === void 0 ? void 0 : _mergedValues$index.value) !== (newVal === null || newVal === void 0 ? void 0 : newVal.value);\n    }))) {\n      var returnValues = labelInValue ? labeledValues : labeledValues.map(function (v) {\n        return v.value;\n      });\n      var returnOptions = labeledValues.map(function (v) {\n        return injectPropsWithOption(getMixedOption(v.value));\n      });\n      onChange( // Value\n      multiple ? returnValues : returnValues[0], // Option\n      multiple ? returnOptions : returnOptions[0]);\n    }\n  }; // ======================= Accessibility ========================\n\n\n  var _React$useState = React.useState(null),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      activeValue = _React$useState2[0],\n      setActiveValue = _React$useState2[1];\n\n  var _React$useState3 = React.useState(0),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      accessibilityIndex = _React$useState4[0],\n      setAccessibilityIndex = _React$useState4[1];\n\n  var mergedDefaultActiveFirstOption = defaultActiveFirstOption !== undefined ? defaultActiveFirstOption : mode !== 'combobox';\n  var onActiveValue = React.useCallback(function (active, index) {\n    var _ref2 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n        _ref2$source = _ref2.source,\n        source = _ref2$source === void 0 ? 'keyboard' : _ref2$source;\n\n    setAccessibilityIndex(index);\n\n    if (backfill && mode === 'combobox' && active !== null && source === 'keyboard') {\n      setActiveValue(String(active));\n    }\n  }, [backfill, mode]); // ========================= OptionList =========================\n\n  var triggerSelect = function triggerSelect(val, selected) {\n    var getSelectEnt = function getSelectEnt() {\n      var _option$key2;\n\n      var option = getMixedOption(val);\n      return [labelInValue ? {\n        label: option === null || option === void 0 ? void 0 : option[mergedFieldNames.label],\n        value: val,\n        key: (_option$key2 = option.key) !== null && _option$key2 !== void 0 ? _option$key2 : val\n      } : val, injectPropsWithOption(option)];\n    };\n\n    if (selected && onSelect) {\n      var _getSelectEnt = getSelectEnt(),\n          _getSelectEnt2 = _slicedToArray(_getSelectEnt, 2),\n          wrappedValue = _getSelectEnt2[0],\n          option = _getSelectEnt2[1];\n\n      onSelect(wrappedValue, option);\n    } else if (!selected && onDeselect) {\n      var _getSelectEnt3 = getSelectEnt(),\n          _getSelectEnt4 = _slicedToArray(_getSelectEnt3, 2),\n          _wrappedValue = _getSelectEnt4[0],\n          _option = _getSelectEnt4[1];\n\n      onDeselect(_wrappedValue, _option);\n    }\n  }; // Used for OptionList selection\n\n\n  var onInternalSelect = useRefFunc(function (val, info) {\n    var cloneValues; // Single mode always trigger select only with option list\n\n    var mergedSelect = multiple ? info.selected : true;\n\n    if (mergedSelect) {\n      cloneValues = multiple ? [].concat(_toConsumableArray(mergedValues), [val]) : [val];\n    } else {\n      cloneValues = mergedValues.filter(function (v) {\n        return v.value !== val;\n      });\n    }\n\n    triggerChange(cloneValues);\n    triggerSelect(val, mergedSelect); // Clean search value if single or configured\n\n    if (mode === 'combobox') {\n      // setSearchValue(String(val));\n      setActiveValue('');\n    } else if (!isMultiple || autoClearSearchValue) {\n      setSearchValue('');\n      setActiveValue('');\n    }\n  }); // ======================= Display Change =======================\n  // BaseSelect display values change\n\n  var onDisplayValuesChange = function onDisplayValuesChange(nextValues, info) {\n    triggerChange(nextValues);\n\n    if (info.type === 'remove' || info.type === 'clear') {\n      info.values.forEach(function (item) {\n        triggerSelect(item.value, false);\n      });\n    }\n  }; // =========================== Search ===========================\n\n\n  var onInternalSearch = function onInternalSearch(searchText, info) {\n    setSearchValue(searchText);\n    setActiveValue(null); // [Submit] Tag mode should flush input\n\n    if (info.source === 'submit') {\n      var formatted = (searchText || '').trim(); // prevent empty tags from appearing when you click the Enter button\n\n      if (formatted) {\n        var newRawValues = Array.from(new Set([].concat(_toConsumableArray(rawValues), [formatted])));\n        triggerChange(newRawValues);\n        triggerSelect(formatted, true);\n        setSearchValue('');\n      }\n\n      return;\n    }\n\n    if (info.source !== 'blur') {\n      if (mode === 'combobox') {\n        triggerChange(searchText);\n      }\n\n      onSearch === null || onSearch === void 0 ? void 0 : onSearch(searchText);\n    }\n  };\n\n  var onInternalSearchSplit = function onInternalSearchSplit(words) {\n    var patchValues = words;\n\n    if (mode !== 'tags') {\n      patchValues = words.map(function (word) {\n        var opt = labelOptions.get(word);\n        return opt === null || opt === void 0 ? void 0 : opt.value;\n      }).filter(function (val) {\n        return val !== undefined;\n      });\n    }\n\n    var newRawValues = Array.from(new Set([].concat(_toConsumableArray(rawValues), _toConsumableArray(patchValues))));\n    triggerChange(newRawValues);\n    newRawValues.forEach(function (newRawValue) {\n      triggerSelect(newRawValue, true);\n    });\n  }; // ========================== Context ===========================\n\n\n  var selectContext = React.useMemo(function () {\n    var realVirtual = virtual !== false && dropdownMatchSelectWidth !== false;\n    return _objectSpread(_objectSpread({}, parsedOptions), {}, {\n      flattenOptions: displayOptions,\n      onActiveValue: onActiveValue,\n      defaultActiveFirstOption: mergedDefaultActiveFirstOption,\n      onSelect: onInternalSelect,\n      menuItemSelectedIcon: menuItemSelectedIcon,\n      rawValues: rawValues,\n      fieldNames: mergedFieldNames,\n      virtual: realVirtual,\n      listHeight: listHeight,\n      listItemHeight: listItemHeight,\n      childrenAsData: childrenAsData\n    });\n  }, [parsedOptions, displayOptions, onActiveValue, mergedDefaultActiveFirstOption, onInternalSelect, menuItemSelectedIcon, rawValues, mergedFieldNames, virtual, dropdownMatchSelectWidth, listHeight, listItemHeight, childrenAsData]); // ========================== Warning ===========================\n\n  if (process.env.NODE_ENV !== 'production') {\n    warningProps(props);\n  } // ==============================================================\n  // ==                          Render                          ==\n  // ==============================================================\n\n\n  return /*#__PURE__*/React.createElement(SelectContext.Provider, {\n    value: selectContext\n  }, /*#__PURE__*/React.createElement(BaseSelect, _extends({}, restProps, {\n    // >>> MISC\n    id: mergedId,\n    prefixCls: prefixCls,\n    ref: ref,\n    omitDomProps: OMIT_DOM_PROPS,\n    mode: mode // >>> Values\n    ,\n    displayValues: displayValues,\n    onDisplayValuesChange: onDisplayValuesChange // >>> Search\n    ,\n    searchValue: mergedSearchValue,\n    onSearch: onInternalSearch,\n    onSearchSplit: onInternalSearchSplit,\n    dropdownMatchSelectWidth: dropdownMatchSelectWidth // >>> OptionList\n    ,\n    OptionList: OptionList,\n    emptyOptions: !displayOptions.length // >>> Accessibility\n    ,\n    activeValue: activeValue,\n    activeDescendantId: \"\".concat(mergedId, \"_list_\").concat(accessibilityIndex)\n  })));\n});\n\nif (process.env.NODE_ENV !== 'production') {\n  Select.displayName = 'Select';\n}\n\nvar TypedSelect = Select;\nTypedSelect.Option = Option;\nTypedSelect.OptGroup = OptGroup;\nexport default TypedSelect;","map":{"version":3,"sources":["/Users/iflego/Documents/GitHub/landy-react-template/my-app/node_modules/rc-select/es/Select.js"],"names":["_extends","_toConsumableArray","_defineProperty","_objectSpread","_slicedToArray","_objectWithoutProperties","_typeof","_excluded","React","warning","useMergedState","BaseSelect","isMultiple","OptionList","Option","OptGroup","useOptions","SelectContext","useId","useRefFunc","fillFieldNames","flattenOptions","injectPropsWithOption","warningProps","toArray","useFilterOptions","useCache","OMIT_DOM_PROPS","isRawValue","value","Select","forwardRef","props","ref","id","mode","_props$prefixCls","prefixCls","backfill","fieldNames","inputValue","searchValue","onSearch","_props$autoClearSearc","autoClearSearchValue","onSelect","onDeselect","_props$dropdownMatchS","dropdownMatchSelectWidth","filterOption","filterSort","optionFilterProp","optionLabelProp","options","children","defaultActiveFirstOption","menuItemSelectedIcon","virtual","_props$listHeight","listHeight","_props$listItemHeight","listItemHeight","defaultValue","labelInValue","onChange","restProps","mergedId","multiple","childrenAsData","mergedFilterOption","useMemo","undefined","mergedFieldNames","JSON","stringify","_useMergedState","postState","search","_useMergedState2","mergedSearchValue","setSearchValue","parsedOptions","valueOptions","labelOptions","mergedOptions","convert2LabelValues","useCallback","draftValues","valueList","map","val","rawValue","rawLabel","rawKey","rawDisabled","_val$value","key","label","option","get","_option$key","disabled","process","env","NODE_ENV","optionLabel","_useMergedState3","_useMergedState4","internalValue","setInternalValue","rawLabeledValues","_values$","values","_useCache","_useCache2","mergedValues","getMixedOption","displayValues","length","firstValue","item","_item$label","rawValues","Set","useEffect","_mergedValues$","strValue","String","createTagOption","_ref","mergedLabel","filledTagOptions","cloneOptions","existOptions","has","sort","a","b","forEach","push","filteredOptions","filledSearchOptions","some","concat","orderedFilteredOptions","displayOptions","triggerChange","labeledValues","newVal","index","_mergedValues$index","returnValues","v","returnOptions","_React$useState","useState","_React$useState2","activeValue","setActiveValue","_React$useState3","_React$useState4","accessibilityIndex","setAccessibilityIndex","mergedDefaultActiveFirstOption","onActiveValue","active","_ref2","arguments","_ref2$source","source","triggerSelect","selected","getSelectEnt","_option$key2","_getSelectEnt","_getSelectEnt2","wrappedValue","_getSelectEnt3","_getSelectEnt4","_wrappedValue","_option","onInternalSelect","info","cloneValues","mergedSelect","filter","onDisplayValuesChange","nextValues","type","onInternalSearch","searchText","formatted","trim","newRawValues","Array","from","onInternalSearchSplit","words","patchValues","word","opt","newRawValue","selectContext","realVirtual","createElement","Provider","omitDomProps","onSearchSplit","emptyOptions","activeDescendantId","displayName","TypedSelect"],"mappings":"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","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nvar _excluded = [\"id\", \"mode\", \"prefixCls\", \"backfill\", \"fieldNames\", \"inputValue\", \"searchValue\", \"onSearch\", \"autoClearSearchValue\", \"onSelect\", \"onDeselect\", \"dropdownMatchSelectWidth\", \"filterOption\", \"filterSort\", \"optionFilterProp\", \"optionLabelProp\", \"options\", \"children\", \"defaultActiveFirstOption\", \"menuItemSelectedIcon\", \"virtual\", \"listHeight\", \"listItemHeight\", \"value\", \"defaultValue\", \"labelInValue\", \"onChange\"];\n\n/**\n * To match accessibility requirement, we always provide an input in the component.\n * Other element will not set `tabIndex` to avoid `onBlur` sequence problem.\n * For focused select, we set `aria-live=\"polite\"` to update the accessibility content.\n *\n * ref:\n * - keyboard: https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles/listbox_role#Keyboard_interactions\n *\n * New api:\n * - listHeight\n * - listItemHeight\n * - component\n *\n * Remove deprecated api:\n * - multiple\n * - tags\n * - combobox\n * - firstActiveValue\n * - dropdownMenuStyle\n * - openClassName (Not list in api)\n *\n * Update:\n * - `backfill` only support `combobox` mode\n * - `combobox` mode not support `labelInValue` since it's meaningless\n * - `getInputElement` only support `combobox` mode\n * - `onChange` return OptionData instead of ReactNode\n * - `filterOption` `onChange` `onSelect` accept OptionData instead of ReactNode\n * - `combobox` mode trigger `onChange` will get `undefined` if no `value` match in Option\n * - `combobox` mode not support `optionLabelProp`\n */\nimport * as React from 'react';\nimport warning from \"rc-util/es/warning\";\nimport useMergedState from \"rc-util/es/hooks/useMergedState\";\nimport BaseSelect, { isMultiple } from './BaseSelect';\nimport OptionList from './OptionList';\nimport Option from './Option';\nimport OptGroup from './OptGroup';\nimport useOptions from './hooks/useOptions';\nimport SelectContext from './SelectContext';\nimport useId from './hooks/useId';\nimport useRefFunc from './hooks/useRefFunc';\nimport { fillFieldNames, flattenOptions, injectPropsWithOption } from './utils/valueUtil';\nimport warningProps from './utils/warningPropsUtil';\nimport { toArray } from './utils/commonUtil';\nimport useFilterOptions from './hooks/useFilterOptions';\nimport useCache from './hooks/useCache';\nvar OMIT_DOM_PROPS = ['inputValue'];\n\nfunction isRawValue(value) {\n  return !value || _typeof(value) !== 'object';\n}\n\nvar Select = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var id = props.id,\n      mode = props.mode,\n      _props$prefixCls = props.prefixCls,\n      prefixCls = _props$prefixCls === void 0 ? 'rc-select' : _props$prefixCls,\n      backfill = props.backfill,\n      fieldNames = props.fieldNames,\n      inputValue = props.inputValue,\n      searchValue = props.searchValue,\n      onSearch = props.onSearch,\n      _props$autoClearSearc = props.autoClearSearchValue,\n      autoClearSearchValue = _props$autoClearSearc === void 0 ? true : _props$autoClearSearc,\n      onSelect = props.onSelect,\n      onDeselect = props.onDeselect,\n      _props$dropdownMatchS = props.dropdownMatchSelectWidth,\n      dropdownMatchSelectWidth = _props$dropdownMatchS === void 0 ? true : _props$dropdownMatchS,\n      filterOption = props.filterOption,\n      filterSort = props.filterSort,\n      optionFilterProp = props.optionFilterProp,\n      optionLabelProp = props.optionLabelProp,\n      options = props.options,\n      children = props.children,\n      defaultActiveFirstOption = props.defaultActiveFirstOption,\n      menuItemSelectedIcon = props.menuItemSelectedIcon,\n      virtual = props.virtual,\n      _props$listHeight = props.listHeight,\n      listHeight = _props$listHeight === void 0 ? 200 : _props$listHeight,\n      _props$listItemHeight = props.listItemHeight,\n      listItemHeight = _props$listItemHeight === void 0 ? 20 : _props$listItemHeight,\n      value = props.value,\n      defaultValue = props.defaultValue,\n      labelInValue = props.labelInValue,\n      onChange = props.onChange,\n      restProps = _objectWithoutProperties(props, _excluded);\n\n  var mergedId = useId(id);\n  var multiple = isMultiple(mode);\n  var childrenAsData = !!(!options && children);\n  var mergedFilterOption = React.useMemo(function () {\n    if (filterOption === undefined && mode === 'combobox') {\n      return false;\n    }\n\n    return filterOption;\n  }, [filterOption, mode]); // ========================= FieldNames =========================\n\n  var mergedFieldNames = React.useMemo(function () {\n    return fillFieldNames(fieldNames, childrenAsData);\n  },\n  /* eslint-disable react-hooks/exhaustive-deps */\n  [// We stringify fieldNames to avoid unnecessary re-renders.\n  JSON.stringify(fieldNames), childrenAsData]); // =========================== Search ===========================\n\n  var _useMergedState = useMergedState('', {\n    value: searchValue !== undefined ? searchValue : inputValue,\n    postState: function postState(search) {\n      return search || '';\n    }\n  }),\n      _useMergedState2 = _slicedToArray(_useMergedState, 2),\n      mergedSearchValue = _useMergedState2[0],\n      setSearchValue = _useMergedState2[1]; // =========================== Option ===========================\n\n\n  var parsedOptions = useOptions(options, children, mergedFieldNames);\n  var valueOptions = parsedOptions.valueOptions,\n      labelOptions = parsedOptions.labelOptions,\n      mergedOptions = parsedOptions.options; // ========================= Wrap Value =========================\n\n  var convert2LabelValues = React.useCallback(function (draftValues) {\n    // Convert to array\n    var valueList = toArray(draftValues); // Convert to labelInValue type\n\n    return valueList.map(function (val) {\n      var rawValue;\n      var rawLabel;\n      var rawKey;\n      var rawDisabled; // Fill label & value\n\n      if (isRawValue(val)) {\n        rawValue = val;\n      } else {\n        var _val$value;\n\n        rawKey = val.key;\n        rawLabel = val.label;\n        rawValue = (_val$value = val.value) !== null && _val$value !== void 0 ? _val$value : rawKey;\n      }\n\n      var option = valueOptions.get(rawValue);\n\n      if (option) {\n        var _option$key;\n\n        // Fill missing props\n        if (rawLabel === undefined) rawLabel = option === null || option === void 0 ? void 0 : option[optionLabelProp || mergedFieldNames.label];\n        if (rawKey === undefined) rawKey = (_option$key = option === null || option === void 0 ? void 0 : option.key) !== null && _option$key !== void 0 ? _option$key : rawValue;\n        rawDisabled = option === null || option === void 0 ? void 0 : option.disabled; // Warning if label not same as provided\n\n        if (process.env.NODE_ENV !== 'production' && !isRawValue(val)) {\n          var optionLabel = option === null || option === void 0 ? void 0 : option[mergedFieldNames.label];\n\n          if (optionLabel !== undefined && optionLabel !== rawLabel) {\n            warning(false, '`label` of `value` is not same as `label` in Select options.');\n          }\n        }\n      }\n\n      return {\n        label: rawLabel,\n        value: rawValue,\n        key: rawKey,\n        disabled: rawDisabled\n      };\n    });\n  }, [mergedFieldNames, optionLabelProp, valueOptions]); // =========================== Values ===========================\n\n  var _useMergedState3 = useMergedState(defaultValue, {\n    value: value\n  }),\n      _useMergedState4 = _slicedToArray(_useMergedState3, 2),\n      internalValue = _useMergedState4[0],\n      setInternalValue = _useMergedState4[1]; // Merged value with LabelValueType\n\n\n  var rawLabeledValues = React.useMemo(function () {\n    var _values$;\n\n    var values = convert2LabelValues(internalValue); // combobox no need save value when it's empty\n\n    if (mode === 'combobox' && !((_values$ = values[0]) === null || _values$ === void 0 ? void 0 : _values$.value)) {\n      return [];\n    }\n\n    return values;\n  }, [internalValue, convert2LabelValues, mode]); // Fill label with cache to avoid option remove\n\n  var _useCache = useCache(rawLabeledValues, valueOptions),\n      _useCache2 = _slicedToArray(_useCache, 2),\n      mergedValues = _useCache2[0],\n      getMixedOption = _useCache2[1];\n\n  var displayValues = React.useMemo(function () {\n    // `null` need show as placeholder instead\n    // https://github.com/ant-design/ant-design/issues/25057\n    if (!mode && mergedValues.length === 1) {\n      var firstValue = mergedValues[0];\n\n      if (firstValue.value === null && (firstValue.label === null || firstValue.label === undefined)) {\n        return [];\n      }\n    }\n\n    return mergedValues.map(function (item) {\n      var _item$label;\n\n      return _objectSpread(_objectSpread({}, item), {}, {\n        label: (_item$label = item.label) !== null && _item$label !== void 0 ? _item$label : item.value\n      });\n    });\n  }, [mode, mergedValues]);\n  /** Convert `displayValues` to raw value type set */\n\n  var rawValues = React.useMemo(function () {\n    return new Set(mergedValues.map(function (val) {\n      return val.value;\n    }));\n  }, [mergedValues]);\n  React.useEffect(function () {\n    if (mode === 'combobox') {\n      var _mergedValues$;\n\n      var strValue = (_mergedValues$ = mergedValues[0]) === null || _mergedValues$ === void 0 ? void 0 : _mergedValues$.value;\n\n      if (strValue !== undefined && strValue !== null) {\n        setSearchValue(String(strValue));\n      }\n    }\n  }, [mergedValues]); // ======================= Display Option =======================\n  // Create a placeholder item if not exist in `options`\n\n  var createTagOption = useRefFunc(function (val, label) {\n    var _ref;\n\n    var mergedLabel = label !== null && label !== void 0 ? label : val;\n    return _ref = {}, _defineProperty(_ref, mergedFieldNames.value, val), _defineProperty(_ref, mergedFieldNames.label, mergedLabel), _ref;\n  }); // Fill tag as option if mode is `tags`\n\n  var filledTagOptions = React.useMemo(function () {\n    if (mode !== 'tags') {\n      return mergedOptions;\n    } // >>> Tag mode\n\n\n    var cloneOptions = _toConsumableArray(mergedOptions); // Check if value exist in options (include new patch item)\n\n\n    var existOptions = function existOptions(val) {\n      return valueOptions.has(val);\n    }; // Fill current value as option\n\n\n    _toConsumableArray(mergedValues).sort(function (a, b) {\n      return a.value < b.value ? -1 : 1;\n    }).forEach(function (item) {\n      var val = item.value;\n\n      if (!existOptions(val)) {\n        cloneOptions.push(createTagOption(val, item.label));\n      }\n    });\n\n    return cloneOptions;\n  }, [createTagOption, mergedOptions, valueOptions, mergedValues, mode]);\n  var filteredOptions = useFilterOptions(filledTagOptions, mergedFieldNames, mergedSearchValue, mergedFilterOption, optionFilterProp); // Fill options with search value if needed\n\n  var filledSearchOptions = React.useMemo(function () {\n    if (mode !== 'tags' || !mergedSearchValue || filteredOptions.some(function (item) {\n      return item[optionFilterProp || 'value'] === mergedSearchValue;\n    })) {\n      return filteredOptions;\n    } // Fill search value as option\n\n\n    return [createTagOption(mergedSearchValue)].concat(_toConsumableArray(filteredOptions));\n  }, [createTagOption, optionFilterProp, mode, filteredOptions, mergedSearchValue]);\n  var orderedFilteredOptions = React.useMemo(function () {\n    if (!filterSort) {\n      return filledSearchOptions;\n    }\n\n    return _toConsumableArray(filledSearchOptions).sort(function (a, b) {\n      return filterSort(a, b);\n    });\n  }, [filledSearchOptions, filterSort]);\n  var displayOptions = React.useMemo(function () {\n    return flattenOptions(orderedFilteredOptions, {\n      fieldNames: mergedFieldNames,\n      childrenAsData: childrenAsData\n    });\n  }, [orderedFilteredOptions, mergedFieldNames, childrenAsData]); // =========================== Change ===========================\n\n  var triggerChange = function triggerChange(values) {\n    var labeledValues = convert2LabelValues(values);\n    setInternalValue(labeledValues);\n\n    if (onChange && ( // Trigger event only when value changed\n    labeledValues.length !== mergedValues.length || labeledValues.some(function (newVal, index) {\n      var _mergedValues$index;\n\n      return ((_mergedValues$index = mergedValues[index]) === null || _mergedValues$index === void 0 ? void 0 : _mergedValues$index.value) !== (newVal === null || newVal === void 0 ? void 0 : newVal.value);\n    }))) {\n      var returnValues = labelInValue ? labeledValues : labeledValues.map(function (v) {\n        return v.value;\n      });\n      var returnOptions = labeledValues.map(function (v) {\n        return injectPropsWithOption(getMixedOption(v.value));\n      });\n      onChange( // Value\n      multiple ? returnValues : returnValues[0], // Option\n      multiple ? returnOptions : returnOptions[0]);\n    }\n  }; // ======================= Accessibility ========================\n\n\n  var _React$useState = React.useState(null),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      activeValue = _React$useState2[0],\n      setActiveValue = _React$useState2[1];\n\n  var _React$useState3 = React.useState(0),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      accessibilityIndex = _React$useState4[0],\n      setAccessibilityIndex = _React$useState4[1];\n\n  var mergedDefaultActiveFirstOption = defaultActiveFirstOption !== undefined ? defaultActiveFirstOption : mode !== 'combobox';\n  var onActiveValue = React.useCallback(function (active, index) {\n    var _ref2 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n        _ref2$source = _ref2.source,\n        source = _ref2$source === void 0 ? 'keyboard' : _ref2$source;\n\n    setAccessibilityIndex(index);\n\n    if (backfill && mode === 'combobox' && active !== null && source === 'keyboard') {\n      setActiveValue(String(active));\n    }\n  }, [backfill, mode]); // ========================= OptionList =========================\n\n  var triggerSelect = function triggerSelect(val, selected) {\n    var getSelectEnt = function getSelectEnt() {\n      var _option$key2;\n\n      var option = getMixedOption(val);\n      return [labelInValue ? {\n        label: option === null || option === void 0 ? void 0 : option[mergedFieldNames.label],\n        value: val,\n        key: (_option$key2 = option.key) !== null && _option$key2 !== void 0 ? _option$key2 : val\n      } : val, injectPropsWithOption(option)];\n    };\n\n    if (selected && onSelect) {\n      var _getSelectEnt = getSelectEnt(),\n          _getSelectEnt2 = _slicedToArray(_getSelectEnt, 2),\n          wrappedValue = _getSelectEnt2[0],\n          option = _getSelectEnt2[1];\n\n      onSelect(wrappedValue, option);\n    } else if (!selected && onDeselect) {\n      var _getSelectEnt3 = getSelectEnt(),\n          _getSelectEnt4 = _slicedToArray(_getSelectEnt3, 2),\n          _wrappedValue = _getSelectEnt4[0],\n          _option = _getSelectEnt4[1];\n\n      onDeselect(_wrappedValue, _option);\n    }\n  }; // Used for OptionList selection\n\n\n  var onInternalSelect = useRefFunc(function (val, info) {\n    var cloneValues; // Single mode always trigger select only with option list\n\n    var mergedSelect = multiple ? info.selected : true;\n\n    if (mergedSelect) {\n      cloneValues = multiple ? [].concat(_toConsumableArray(mergedValues), [val]) : [val];\n    } else {\n      cloneValues = mergedValues.filter(function (v) {\n        return v.value !== val;\n      });\n    }\n\n    triggerChange(cloneValues);\n    triggerSelect(val, mergedSelect); // Clean search value if single or configured\n\n    if (mode === 'combobox') {\n      // setSearchValue(String(val));\n      setActiveValue('');\n    } else if (!isMultiple || autoClearSearchValue) {\n      setSearchValue('');\n      setActiveValue('');\n    }\n  }); // ======================= Display Change =======================\n  // BaseSelect display values change\n\n  var onDisplayValuesChange = function onDisplayValuesChange(nextValues, info) {\n    triggerChange(nextValues);\n\n    if (info.type === 'remove' || info.type === 'clear') {\n      info.values.forEach(function (item) {\n        triggerSelect(item.value, false);\n      });\n    }\n  }; // =========================== Search ===========================\n\n\n  var onInternalSearch = function onInternalSearch(searchText, info) {\n    setSearchValue(searchText);\n    setActiveValue(null); // [Submit] Tag mode should flush input\n\n    if (info.source === 'submit') {\n      var formatted = (searchText || '').trim(); // prevent empty tags from appearing when you click the Enter button\n\n      if (formatted) {\n        var newRawValues = Array.from(new Set([].concat(_toConsumableArray(rawValues), [formatted])));\n        triggerChange(newRawValues);\n        triggerSelect(formatted, true);\n        setSearchValue('');\n      }\n\n      return;\n    }\n\n    if (info.source !== 'blur') {\n      if (mode === 'combobox') {\n        triggerChange(searchText);\n      }\n\n      onSearch === null || onSearch === void 0 ? void 0 : onSearch(searchText);\n    }\n  };\n\n  var onInternalSearchSplit = function onInternalSearchSplit(words) {\n    var patchValues = words;\n\n    if (mode !== 'tags') {\n      patchValues = words.map(function (word) {\n        var opt = labelOptions.get(word);\n        return opt === null || opt === void 0 ? void 0 : opt.value;\n      }).filter(function (val) {\n        return val !== undefined;\n      });\n    }\n\n    var newRawValues = Array.from(new Set([].concat(_toConsumableArray(rawValues), _toConsumableArray(patchValues))));\n    triggerChange(newRawValues);\n    newRawValues.forEach(function (newRawValue) {\n      triggerSelect(newRawValue, true);\n    });\n  }; // ========================== Context ===========================\n\n\n  var selectContext = React.useMemo(function () {\n    var realVirtual = virtual !== false && dropdownMatchSelectWidth !== false;\n    return _objectSpread(_objectSpread({}, parsedOptions), {}, {\n      flattenOptions: displayOptions,\n      onActiveValue: onActiveValue,\n      defaultActiveFirstOption: mergedDefaultActiveFirstOption,\n      onSelect: onInternalSelect,\n      menuItemSelectedIcon: menuItemSelectedIcon,\n      rawValues: rawValues,\n      fieldNames: mergedFieldNames,\n      virtual: realVirtual,\n      listHeight: listHeight,\n      listItemHeight: listItemHeight,\n      childrenAsData: childrenAsData\n    });\n  }, [parsedOptions, displayOptions, onActiveValue, mergedDefaultActiveFirstOption, onInternalSelect, menuItemSelectedIcon, rawValues, mergedFieldNames, virtual, dropdownMatchSelectWidth, listHeight, listItemHeight, childrenAsData]); // ========================== Warning ===========================\n\n  if (process.env.NODE_ENV !== 'production') {\n    warningProps(props);\n  } // ==============================================================\n  // ==                          Render                          ==\n  // ==============================================================\n\n\n  return /*#__PURE__*/React.createElement(SelectContext.Provider, {\n    value: selectContext\n  }, /*#__PURE__*/React.createElement(BaseSelect, _extends({}, restProps, {\n    // >>> MISC\n    id: mergedId,\n    prefixCls: prefixCls,\n    ref: ref,\n    omitDomProps: OMIT_DOM_PROPS,\n    mode: mode // >>> Values\n    ,\n    displayValues: displayValues,\n    onDisplayValuesChange: onDisplayValuesChange // >>> Search\n    ,\n    searchValue: mergedSearchValue,\n    onSearch: onInternalSearch,\n    onSearchSplit: onInternalSearchSplit,\n    dropdownMatchSelectWidth: dropdownMatchSelectWidth // >>> OptionList\n    ,\n    OptionList: OptionList,\n    emptyOptions: !displayOptions.length // >>> Accessibility\n    ,\n    activeValue: activeValue,\n    activeDescendantId: \"\".concat(mergedId, \"_list_\").concat(accessibilityIndex)\n  })));\n});\n\nif (process.env.NODE_ENV !== 'production') {\n  Select.displayName = 'Select';\n}\n\nvar TypedSelect = Select;\nTypedSelect.Option = Option;\nTypedSelect.OptGroup = OptGroup;\nexport default TypedSelect;"]},"metadata":{},"sourceType":"module"}