{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport * as React from 'react';\nimport classNames from 'classnames';\n\nfunction UnitNumber(_ref) {\n  var prefixCls = _ref.prefixCls,\n      value = _ref.value,\n      current = _ref.current,\n      _ref$offset = _ref.offset,\n      offset = _ref$offset === void 0 ? 0 : _ref$offset;\n  var style;\n\n  if (offset) {\n    style = {\n      position: 'absolute',\n      top: \"\".concat(offset, \"00%\"),\n      left: 0\n    };\n  }\n\n  return /*#__PURE__*/React.createElement(\"span\", {\n    style: style,\n    className: classNames(\"\".concat(prefixCls, \"-only-unit\"), {\n      current: current\n    })\n  }, value);\n}\n\nfunction getOffset(start, end, unit) {\n  var index = start;\n  var offset = 0;\n\n  while ((index + 10) % 10 !== end) {\n    index += unit;\n    offset += unit;\n  }\n\n  return offset;\n}\n\nexport default function SingleNumber(props) {\n  var prefixCls = props.prefixCls,\n      originCount = props.count,\n      originValue = props.value;\n  var value = Number(originValue);\n  var count = Math.abs(originCount);\n\n  var _React$useState = React.useState(value),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      prevValue = _React$useState2[0],\n      setPrevValue = _React$useState2[1];\n\n  var _React$useState3 = React.useState(count),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      prevCount = _React$useState4[0],\n      setPrevCount = _React$useState4[1]; // ============================= Events =============================\n\n\n  var onTransitionEnd = function onTransitionEnd() {\n    setPrevValue(value);\n    setPrevCount(count);\n  }; // Fallback if transition event not support\n\n\n  React.useEffect(function () {\n    var timeout = setTimeout(function () {\n      onTransitionEnd();\n    }, 1000);\n    return function () {\n      clearTimeout(timeout);\n    };\n  }, [value]); // ============================= Render =============================\n  // Render unit list\n\n  var unitNodes;\n  var offsetStyle;\n\n  if (prevValue === value || Number.isNaN(value) || Number.isNaN(prevValue)) {\n    // Nothing to change\n    unitNodes = [/*#__PURE__*/React.createElement(UnitNumber, _extends({}, props, {\n      key: value,\n      current: true\n    }))];\n    offsetStyle = {\n      transition: 'none'\n    };\n  } else {\n    unitNodes = []; // Fill basic number units\n\n    var end = value + 10;\n    var unitNumberList = [];\n\n    for (var index = value; index <= end; index += 1) {\n      unitNumberList.push(index);\n    } // Fill with number unit nodes\n\n\n    var prevIndex = unitNumberList.findIndex(function (n) {\n      return n % 10 === prevValue;\n    });\n    unitNodes = unitNumberList.map(function (n, index) {\n      var singleUnit = n % 10;\n      return /*#__PURE__*/React.createElement(UnitNumber, _extends({}, props, {\n        key: n,\n        value: singleUnit,\n        offset: index - prevIndex,\n        current: index === prevIndex\n      }));\n    }); // Calculate container offset value\n\n    var unit = prevCount < count ? 1 : -1;\n    offsetStyle = {\n      transform: \"translateY(\".concat(-getOffset(prevValue, value, unit), \"00%)\")\n    };\n  }\n\n  return /*#__PURE__*/React.createElement(\"span\", {\n    className: \"\".concat(prefixCls, \"-only\"),\n    style: offsetStyle,\n    onTransitionEnd: onTransitionEnd\n  }, unitNodes);\n}","map":{"version":3,"sources":["/Users/iflego/Documents/GitHub/landy-react-template/my-app/node_modules/antd/es/badge/SingleNumber.js"],"names":["_extends","_slicedToArray","React","classNames","UnitNumber","_ref","prefixCls","value","current","_ref$offset","offset","style","position","top","concat","left","createElement","className","getOffset","start","end","unit","index","SingleNumber","props","originCount","count","originValue","Number","Math","abs","_React$useState","useState","_React$useState2","prevValue","setPrevValue","_React$useState3","_React$useState4","prevCount","setPrevCount","onTransitionEnd","useEffect","timeout","setTimeout","clearTimeout","unitNodes","offsetStyle","isNaN","key","transition","unitNumberList","push","prevIndex","findIndex","n","map","singleUnit","transform"],"mappings":"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","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport * as React from 'react';\nimport classNames from 'classnames';\n\nfunction UnitNumber(_ref) {\n  var prefixCls = _ref.prefixCls,\n      value = _ref.value,\n      current = _ref.current,\n      _ref$offset = _ref.offset,\n      offset = _ref$offset === void 0 ? 0 : _ref$offset;\n  var style;\n\n  if (offset) {\n    style = {\n      position: 'absolute',\n      top: \"\".concat(offset, \"00%\"),\n      left: 0\n    };\n  }\n\n  return /*#__PURE__*/React.createElement(\"span\", {\n    style: style,\n    className: classNames(\"\".concat(prefixCls, \"-only-unit\"), {\n      current: current\n    })\n  }, value);\n}\n\nfunction getOffset(start, end, unit) {\n  var index = start;\n  var offset = 0;\n\n  while ((index + 10) % 10 !== end) {\n    index += unit;\n    offset += unit;\n  }\n\n  return offset;\n}\n\nexport default function SingleNumber(props) {\n  var prefixCls = props.prefixCls,\n      originCount = props.count,\n      originValue = props.value;\n  var value = Number(originValue);\n  var count = Math.abs(originCount);\n\n  var _React$useState = React.useState(value),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      prevValue = _React$useState2[0],\n      setPrevValue = _React$useState2[1];\n\n  var _React$useState3 = React.useState(count),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      prevCount = _React$useState4[0],\n      setPrevCount = _React$useState4[1]; // ============================= Events =============================\n\n\n  var onTransitionEnd = function onTransitionEnd() {\n    setPrevValue(value);\n    setPrevCount(count);\n  }; // Fallback if transition event not support\n\n\n  React.useEffect(function () {\n    var timeout = setTimeout(function () {\n      onTransitionEnd();\n    }, 1000);\n    return function () {\n      clearTimeout(timeout);\n    };\n  }, [value]); // ============================= Render =============================\n  // Render unit list\n\n  var unitNodes;\n  var offsetStyle;\n\n  if (prevValue === value || Number.isNaN(value) || Number.isNaN(prevValue)) {\n    // Nothing to change\n    unitNodes = [/*#__PURE__*/React.createElement(UnitNumber, _extends({}, props, {\n      key: value,\n      current: true\n    }))];\n    offsetStyle = {\n      transition: 'none'\n    };\n  } else {\n    unitNodes = []; // Fill basic number units\n\n    var end = value + 10;\n    var unitNumberList = [];\n\n    for (var index = value; index <= end; index += 1) {\n      unitNumberList.push(index);\n    } // Fill with number unit nodes\n\n\n    var prevIndex = unitNumberList.findIndex(function (n) {\n      return n % 10 === prevValue;\n    });\n    unitNodes = unitNumberList.map(function (n, index) {\n      var singleUnit = n % 10;\n      return /*#__PURE__*/React.createElement(UnitNumber, _extends({}, props, {\n        key: n,\n        value: singleUnit,\n        offset: index - prevIndex,\n        current: index === prevIndex\n      }));\n    }); // Calculate container offset value\n\n    var unit = prevCount < count ? 1 : -1;\n    offsetStyle = {\n      transform: \"translateY(\".concat(-getOffset(prevValue, value, unit), \"00%)\")\n    };\n  }\n\n  return /*#__PURE__*/React.createElement(\"span\", {\n    className: \"\".concat(prefixCls, \"-only\"),\n    style: offsetStyle,\n    onTransitionEnd: onTransitionEnd\n  }, unitNodes);\n}"]},"metadata":{},"sourceType":"module"}